import React, { ReactNode } from "react";
import useWindowDimensions from "@/hooks/useWindowDimensions";
import "./StageTab.scss";

interface Props {
  activeStage: string;
  setActiveStage: (value: string) => void;
  stageIcon?: boolean;
}

const stages = ["포도밭", "포도알", "포도송이", "와인"];
const availableStages = ["포도밭", "포도알"];

const StageTab = ({ activeStage, setActiveStage, stageIcon = true }: Props) => {
  const { widthConditions } = useWindowDimensions();
  const { isSmallMobile, isMobile, isTablet, isLaptop, isDesktop } =
    widthConditions;

  const STAGE_ICONS: Record<string, ReactNode> = {
    포도밭: (
      <svg
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        className={isSmallMobile ? "w-[14px] h-[14px] " : "w-[18px] h-[18px] "}
        viewBox="0 0 18 18"
        fill="none"
      >
        <path
          d="M16.2 0H1.8C0.81 0 0 0.81 0 1.8V16.2C0 17.19 0.81 18 1.8 18H16.2C17.19 18 18 17.19 18 16.2V1.8C18 0.81 17.19 0 16.2 0ZM11.97 1.8C11.25 2.79 10.8 4.05 10.8 5.4H7.2C7.2 3.96 7.92 2.61 9 1.8H11.97ZM10.8 10.8H7.2C7.2 9.45 6.75 8.19 6.03 7.2H9C10.08 8.01 10.8 9.36 10.8 10.8ZM1.8 1.8H6.57C5.85 2.79 5.4 4.05 5.4 5.4H1.8V1.8ZM1.8 7.2H3.6C4.68 8.01 5.4 9.27 5.4 10.8H1.8V7.2ZM1.8 16.2V12.6H6.57C5.85 13.59 5.4 14.85 5.4 16.2H1.8ZM7.2 16.2C7.2 14.76 7.92 13.41 9 12.6H11.97C11.25 13.59 10.8 14.85 10.8 16.2H7.2ZM16.2 16.2H12.6C12.6 14.76 13.32 13.41 14.4 12.6H16.2V16.2ZM16.2 10.8H12.6C12.6 9.45 12.15 8.19 11.43 7.2H16.2V10.8ZM16.2 5.4H12.6C12.6 3.96 13.32 2.61 14.4 1.8H16.2V5.4Z"
          fill="url(#paint0_linear_5094_39200)"
        />
        <path
          d="M16.2 0H1.8C0.81 0 0 0.81 0 1.8V16.2C0 17.19 0.81 18 1.8 18H16.2C17.19 18 18 17.19 18 16.2V1.8C18 0.81 17.19 0 16.2 0ZM11.97 1.8C11.25 2.79 10.8 4.05 10.8 5.4H7.2C7.2 3.96 7.92 2.61 9 1.8H11.97ZM10.8 10.8H7.2C7.2 9.45 6.75 8.19 6.03 7.2H9C10.08 8.01 10.8 9.36 10.8 10.8ZM1.8 1.8H6.57C5.85 2.79 5.4 4.05 5.4 5.4H1.8V1.8ZM1.8 7.2H3.6C4.68 8.01 5.4 9.27 5.4 10.8H1.8V7.2ZM1.8 16.2V12.6H6.57C5.85 13.59 5.4 14.85 5.4 16.2H1.8ZM7.2 16.2C7.2 14.76 7.92 13.41 9 12.6H11.97C11.25 13.59 10.8 14.85 10.8 16.2H7.2ZM16.2 16.2H12.6C12.6 14.76 13.32 13.41 14.4 12.6H16.2V16.2ZM16.2 10.8H12.6C12.6 9.45 12.15 8.19 11.43 7.2H16.2V10.8ZM16.2 5.4H12.6C12.6 3.96 13.32 2.61 14.4 1.8H16.2V5.4Z"
          fill="url(#paint1_linear_5094_39200)"
          fill-opacity="0.3"
        />
        <defs>
          <linearGradient
            id="paint0_linear_5094_39200"
            x1="5.48261e-07"
            y1="5.48261e-07"
            x2="18.9316"
            y2="1.03995"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#DFCDFF" />
            <stop offset="1" stop-color="#B891FF" />
          </linearGradient>
          <linearGradient
            id="paint1_linear_5094_39200"
            x1="-7.08445e-09"
            y1="12.12"
            x2="18.1754"
            y2="11.6874"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#F8EDFF" />
            <stop offset="1" stop-color="#CEF2FF" />
          </linearGradient>
        </defs>
      </svg>
    ),
    포도알: (
      <svg
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        className={isSmallMobile ? "w-[14px] h-[14px] " : "w-[18px] h-[18px] "}
        viewBox="0 0 18 18"
        fill="none"
      >
        <path
          d="M7.36364 8.59091C7.36364 8.26542 7.49294 7.95326 7.7231 7.7231C7.95326 7.49294 8.26542 7.36364 8.59091 7.36364C8.9164 7.36364 9.22856 7.23433 9.45872 7.00418C9.68888 6.77402 9.81818 6.46186 9.81818 6.13636C9.81818 5.81087 9.68888 5.49871 9.45872 5.26855C9.22856 5.03839 8.9164 4.90909 8.59091 4.90909C7.61443 4.90909 6.67795 5.297 5.98747 5.98747C5.297 6.67795 4.90909 7.61443 4.90909 8.59091C4.90909 8.9164 5.03839 9.22856 5.26855 9.45872C5.49871 9.68888 5.81087 9.81818 6.13636 9.81818C6.46186 9.81818 6.77402 9.68888 7.00418 9.45872C7.23433 9.22856 7.36364 8.9164 7.36364 8.59091ZM0 9C0 6.61305 0.948211 4.32387 2.63604 2.63604C4.32387 0.948211 6.61305 0 9 0C11.3869 0 13.6761 0.948211 15.364 2.63604C17.0518 4.32387 18 6.61305 18 9C18 11.3869 17.0518 13.6761 15.364 15.364C13.6761 17.0518 11.3869 18 9 18C6.61305 18 4.32387 17.0518 2.63604 15.364C0.948211 13.6761 0 11.3869 0 9ZM9 2.45455C7.26404 2.45455 5.59917 3.14415 4.37166 4.37166C3.14415 5.59917 2.45455 7.26404 2.45455 9C2.45455 10.736 3.14415 12.4008 4.37166 13.6283C5.59917 14.8558 7.26404 15.5455 9 15.5455C10.736 15.5455 12.4008 14.8558 13.6283 13.6283C14.8558 12.4008 15.5455 10.736 15.5455 9C15.5455 7.26404 14.8558 5.59917 13.6283 4.37166C12.4008 3.14415 10.736 2.45455 9 2.45455Z"
          fill="#CAABFF"
        />
      </svg>
    ),
    포도송이: (
      <svg
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        className={isSmallMobile ? "w-[15px] h-[14px] " : "w-[19px] h-[18px] "}
        viewBox="0 0 19 18"
        fill="none"
      >
        <path
          d="M10.5908 1.79959C11.6894 1.79959 12.5805 2.67621 12.5805 3.75804C12.5792 3.95605 12.5387 4.16005 12.4589 4.37006C11.9459 4.68216 11.5147 5.10889 11.2004 5.61569C11.0024 5.68229 10.7992 5.71619 10.5908 5.71739C10.068 5.71739 9.59459 5.51939 9.23816 5.19538C9.03704 5.01207 8.87669 4.78972 8.76721 4.54233C8.65772 4.29494 8.60149 4.0279 8.60205 3.75804C8.60181 3.50071 8.65312 3.24586 8.75303 3.00809C8.85295 2.77031 8.99951 2.55428 9.18433 2.37236C9.36914 2.19044 9.58858 2.04621 9.83008 1.94793C10.0716 1.84965 10.3295 1.79924 10.5908 1.79959ZM14.2201 2.58621C14.0156 1.97349 13.6545 1.42286 13.1715 0.987249C12.6885 0.551639 12.0998 0.24569 11.4621 0.0988085C10.8244 -0.0480734 10.159 -0.0309508 9.52991 0.148531C8.90084 0.328012 8.32921 0.663818 7.86998 1.12368C7.49807 1.0096 7.11069 0.951939 6.72115 0.952671C6.10001 0.952516 5.48822 1.10165 4.93888 1.38714C4.38954 1.67262 3.91925 2.08582 3.56885 2.59088C3.21844 3.09593 2.9985 3.67757 2.92813 4.28531C2.85775 4.89305 2.93906 5.50852 3.16499 6.0783C2.50821 6.37967 1.95256 6.85958 1.56346 7.46151C1.17437 8.06345 0.968044 8.76234 0.968784 9.47589C0.968784 10.1392 1.14335 10.7629 1.44952 11.3038C0.997357 11.6529 0.631841 12.0987 0.380691 12.6075C0.129541 13.1164 -0.000646011 13.6748 2.41033e-06 14.2406C-0.000117629 14.7343 0.0985138 15.2231 0.290264 15.6792C0.482014 16.1353 0.763126 16.5497 1.11755 16.8988C1.47196 17.2479 1.89275 17.5249 2.35586 17.7138C2.81898 17.9028 3.31535 18 3.81664 18C5.02578 18 6.08779 17.415 6.78239 16.5636C7.35408 16.8812 7.99955 17.0477 8.65597 17.0469C10.1795 17.0469 11.5121 16.1739 12.1253 14.8922C12.7035 15.1111 13.3272 15.188 13.9424 15.1164C14.5576 15.0448 15.1458 14.8268 15.6563 14.4812C16.1668 14.1357 16.5842 13.673 16.8725 13.133C17.1608 12.5931 17.3113 11.9922 17.311 11.3821C17.311 10.9951 17.2562 10.6117 17.1429 10.2454C17.6222 9.77922 17.9678 9.19643 18.1445 8.55621C18.3212 7.91599 18.3228 7.24113 18.149 6.60012C17.9753 5.95912 17.6324 5.37479 17.1552 4.90646C16.678 4.43813 16.0835 4.10247 15.432 3.93355C16.2454 3.17933 17.11 2.57631 18.1445 2.192C18.6149 2.01731 18.8536 1.4919 18.6741 1.02333C18.4972 0.561433 17.9813 0.328132 17.5177 0.500335L17.4993 0.50716C16.2024 0.989572 15.145 1.73389 14.2182 2.58621M15.4749 11.1949C15.4798 11.2561 15.4822 11.3185 15.4822 11.3821C15.4779 11.6412 15.4214 11.8968 15.316 12.1342C15.2106 12.3716 15.0585 12.5861 14.8683 12.7651C14.6782 12.9442 14.4539 13.0844 14.2084 13.1775C13.9628 13.2706 13.701 13.3148 13.438 13.3075C13.175 13.3002 12.9161 13.2417 12.6763 13.1351C12.4364 13.0286 12.2204 12.8763 12.0408 12.687C11.8611 12.4978 11.7214 12.2752 11.6297 12.0324C11.538 11.7896 11.4962 11.5312 11.5066 11.2723C11.5312 10.9123 11.6519 10.5847 11.8456 10.3093C12.3226 10.7508 12.9068 11.0642 13.5422 11.2195C14.1775 11.3747 14.8428 11.3666 15.474 11.1958M9.79109 10.4758C9.51543 10.4994 9.23779 10.466 8.97603 10.3777C8.71427 10.2893 8.47418 10.148 8.2712 9.9628C8.06948 9.77963 7.90855 9.55723 7.79858 9.30967C7.68862 9.06211 7.63202 8.79477 7.63236 8.52456C7.63089 8.20526 7.71005 7.89061 7.86273 7.60892C8.0154 7.32722 8.2368 7.08733 8.507 6.91082C9.1416 7.31837 9.88536 7.52992 10.6429 7.51834V7.57144C10.6429 7.97285 10.7069 8.36076 10.8257 8.72437C10.3216 9.20168 9.96325 9.80837 9.79109 10.4758ZM7.25398 5.58419C6.88109 5.8722 6.56487 6.2268 6.3245 6.63181C5.90857 6.54902 5.53057 6.33703 5.24605 6.027C4.97607 5.73431 4.80238 5.368 4.74783 4.97625C4.69328 4.5845 4.76042 4.18567 4.94043 3.83222C5.12043 3.47876 5.40486 3.18725 5.75631 2.99601C6.10776 2.80478 6.50976 2.72278 6.90943 2.76082C6.64475 3.71009 6.76845 4.7237 7.25398 5.58419ZM5.80995 8.36256C5.80751 8.41656 5.80629 8.47026 5.80629 8.52366C5.80629 9.18788 5.98177 9.81249 6.28886 10.3543C5.93082 10.6278 5.62612 10.9629 5.38953 11.3434C5.19882 11.4034 4.99715 11.434 4.7845 11.4352C4.26173 11.4352 3.7883 11.2372 3.43187 10.9123C3.23087 10.7291 3.07058 10.5069 2.9611 10.2597C2.85162 10.0125 2.79532 9.74559 2.79576 9.47589C2.79576 8.57316 3.41724 7.81444 4.26721 7.59124C4.71515 7.96061 5.2428 8.22442 5.80995 8.36256ZM7.54736 11.6782C8.21198 12.1033 8.99484 12.3131 9.78652 12.2786C9.93001 12.8555 10.2088 13.3802 10.5862 13.8176C10.4678 14.2311 10.2148 14.5948 9.86605 14.853C9.51735 15.1112 9.09224 15.2496 8.65597 15.2468C8.08019 15.2468 7.56107 15.0065 7.19732 14.6195C6.8559 14.2575 6.66648 13.7815 6.66723 13.2875C6.66723 12.9896 6.73395 12.7079 6.85367 12.4568L6.8555 12.4523L6.85916 12.4451C7.01376 12.1328 7.25164 11.8677 7.54736 11.6782ZM4.83934 13.2353V13.2884C4.83934 14.0372 5.06143 14.7356 5.44529 15.3224C5.07148 15.8489 4.4628 16.2 3.81664 16.2C3.55539 16.2 3.29671 16.1493 3.05537 16.0508C2.81402 15.9523 2.59474 15.808 2.41006 15.626C2.22537 15.4441 2.0789 15.2281 1.97901 14.9903C1.87912 14.7526 1.82777 14.4979 1.82789 14.2406C1.82789 13.5692 2.17245 12.9788 2.70528 12.6287C3.33946 13.0356 4.08253 13.2468 4.83934 13.2353ZM14.4623 5.61209C14.7285 5.60414 14.9937 5.64891 15.242 5.74376C15.4903 5.8386 15.7168 5.98159 15.908 6.16423C16.0992 6.34688 16.2512 6.56546 16.3549 6.80703C16.4587 7.0486 16.5122 7.30823 16.5122 7.57054C16.5122 7.83284 16.4587 8.09247 16.3549 8.33404C16.2512 8.57561 16.0992 8.7942 15.908 8.97684C15.7168 9.15949 15.4903 9.30247 15.242 9.39732C14.9937 9.49216 14.7285 9.53694 14.4623 9.52899C13.9421 9.51801 13.447 9.3068 13.083 8.94063C12.7191 8.57446 12.5152 8.08247 12.5152 7.57009C12.5152 7.05771 12.7191 6.56571 13.083 6.19954C13.447 5.83338 13.9421 5.62217 14.4623 5.61119"
          fill="#9E67FF"
        />
      </svg>
    ),
    와인: (
      <svg
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        className={isSmallMobile ? "w-[9px] h-[14px] " : "w-[13px] h-[20px] "}
        viewBox="0 0 13 20"
        fill="none"
      >
        <path
          d="M11.3125 0.849609C11.5337 0.849609 11.7461 0.936523 11.9033 1.09082C12.0607 1.24524 12.1504 1.45518 12.1504 1.6748V7.52148C12.1506 8.93325 11.6234 10.2957 10.6699 11.3516C9.74601 12.3746 8.48319 13.0391 7.1084 13.2334V17.498L9.47656 17.4912C9.6976 17.4906 9.91071 17.5758 10.0684 17.7295C10.2261 17.8835 10.3158 18.0938 10.3164 18.3135C10.3169 18.533 10.2292 18.7436 10.0723 18.8984C9.93494 19.0339 9.7546 19.1167 9.56348 19.1357L9.48145 19.1396L6.27344 19.1504H6.26758L3.51758 19.1396C3.29653 19.1388 3.08435 19.0522 2.92773 18.8975C2.79048 18.7617 2.70582 18.5832 2.6875 18.3936L2.68359 18.3125C2.68449 18.0931 2.77391 17.8833 2.93164 17.7295C3.08953 17.5758 3.3032 17.4903 3.52441 17.4912L5.43359 17.4971V13.2285C4.18117 13.0362 3.0347 12.4205 2.19629 11.4824C1.32868 10.5115 0.849352 9.26299 0.849609 7.9707V1.6748C0.849609 1.45518 0.939313 1.24524 1.09668 1.09082C1.25395 0.936523 1.46631 0.849609 1.6875 0.849609H11.3125ZM2.52539 7.9707C2.52539 8.94389 2.91892 9.87835 3.62109 10.5674C4.32329 11.2564 5.27628 11.6444 6.27051 11.6445C7.38643 11.6445 8.45689 11.209 9.24512 10.4355C10.0331 9.66221 10.4746 8.61381 10.4746 7.52148V6.32227H2.52539V7.9707ZM8.96191 7.17578C9.14404 7.05746 9.36614 7.01464 9.58008 7.05469C9.79388 7.09481 9.98397 7.21518 10.1094 7.3916C10.2349 7.56826 10.2851 7.78679 10.249 8V8.00391C10.0932 8.79985 9.67848 9.5245 9.06836 10.0693C8.56516 10.5192 7.94877 10.8286 7.2832 10.9658C7.17587 10.9878 7.06477 10.9887 6.95703 10.9688C6.84932 10.9488 6.74628 10.9086 6.6543 10.8496C6.56227 10.7905 6.48313 10.7135 6.4209 10.624C6.35868 10.5345 6.31465 10.4335 6.29199 10.3271C6.26943 10.2209 6.26856 10.1115 6.28906 10.0049C6.30962 9.89808 6.35066 9.79577 6.41113 9.70508C6.47151 9.61457 6.54995 9.53733 6.64062 9.47656C6.73133 9.41584 6.83327 9.37264 6.94043 9.35059C7.31434 9.27349 7.66032 9.09962 7.94238 8.84766H7.94336C8.28619 8.54346 8.5183 8.13792 8.60449 7.69336V7.68945C8.65099 7.4784 8.77976 7.29412 8.96191 7.17578ZM2.52539 4.67285H10.4746V2.49902H2.52539V4.67285Z"
          fill="#6A39C0"
          stroke="#6A39C0"
          stroke-width="0.3"
        />
      </svg>
    ),
  };

  const handleStageClick = (stage: string) => {
    if (!availableStages.includes(stage)) return;
    setActiveStage(stage);
  };

  return (
    <>
      <ul
        className="flex relative list-none mt-[10px] mb-[-4px] stage-tab"
        style={{ padding: 0 }}
      >
        {stages.map((stage) => {
          const isActive = activeStage === stage;
          const isAvailable = availableStages.includes(stage);

          return (
            <li
              key={stage}
              className={`flex flex-row  gap-[7px] items-center stage-tab-li z-10  whitespace-nowrap ${
                isSmallMobile ? "p-small-medium" : " h5-medium"
              }
              ${
                isActive
                  ? " border-b-4 border-[#6A39C0] rounded-[1px]"
                  : "text-black"
              }
               ${
                 isAvailable
                   ? "cursor-pointer text-black hover:text-[#6A39C0]"
                   : "text-[var(--grey6)]"
               }
            
          `}
              onClick={() => {
                if (isAvailable) {
                  handleStageClick(stage);
                  setActiveStage(stage);
                }
              }}
            >
              {stageIcon && STAGE_ICONS[stage] && (
                <span
                  className={[
                    "inline-flex",
                    isAvailable ? "" : "opacity-40",
                    isActive ? "" : "",
                  ].join(" ")}
                >
                  {STAGE_ICONS[stage]}
                </span>
              )}
              <span>{stage}</span>
            </li>
          );
        })}
      </ul>
      {/* <span className=" w-full h-[1px] block bg-[#E2E2E2] z-0 "></span> */}
    </>
  );
};
export default StageTab;
